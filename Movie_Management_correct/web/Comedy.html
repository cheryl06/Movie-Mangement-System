<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Bootbusiness | Short description about company">
    <meta name="author" content="Your name">
    <title>Four screens film festival</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap responsive -->
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet">
    <!-- Font awesome - iconic font with IE7 support --> 
    <link href="css/font-awesome.css" rel="stylesheet">
    <link href="css/font-awesome-ie7.css" rel="stylesheet">
    <!-- Bootbusiness theme -->
    <link href="css/boot-business.css" rel="stylesheet">

  </head>
  <body>
    <!-- Start: HEADER -->
  
    <header>
      <!-- Start: Navigation wrapper -->
      <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
                        <!-- Below button used for responsive navigation -->
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
           <!-- Start: Primary navigation -->
            <div class="nav-collapse collapse">        
              <ul class="nav pull-right">
                 <li ><a href="index.html">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="contact_us.html">Contact us</a></li>
              <li><a href="#comedy">Comedy</a></li>
              <li><a href="#action">Action</a></li>
              <li><a href="#drama">Drama</a></li>
              <li><a href="#Romance">Romance</a></li>
              <li><a href="#thriller">Thriller</a></li>
               <li><a href="#Animation">Animation</a></li>
              <li><a href="#Horror">Horror</a></li>             
                <li><a href="uploadfilm.html">UploadFilm</a></li>
                <li class="active"><a href="signin.html">Sign in</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- End: Navigation wrapper -->
    </header>
    <!-- End: HEADER -->
    <!-- Start: MAIN CONTENT -->

    <div class="content">
      <div class="container">
          <div class="viewfilm">
        
            <script id="viewFilms" type="text/x-handlebars-template">

          {{#each this}}
              
          <div id="element{{FilmId}}" data-toggle="tooltip" data-placement="top" title="" data-original-title="<p>CAST:{{Cast}} </p><p>DIRECTOR:{{Director}} </p><p>PRODUCER: {{Producer}}</p>" style="float:left;margin:25px;" class="flex-video widescreen videoContainter" >
          <h4> {{FilmName}}</h4>
       <img src="http://img.youtube.com/vi/{{url}}/hqdefault.jpg" style="height:200px; width:200px" class="clearfix" >
       <div><a data-toggle="modal" data-id={{url}} data-ratingId={{Rating}} title="Add this item" class="open-viewer" href="#viewFilmClipDialog">View Film</a></div>
       <p class="star" id="{{FilmId}}"></p>
       </div>   

     {{/each}}
     </script>



    </div>
      </div>
         
            
     </div>
              <div class="pagination pagination-right" >
    <ul>
    <li><a href="#">Prev</a></li>
    <li><a href="#">1</a></li>
    <li><a href="#">2</a></li>
    <li><a href="#">3</a></li>
    <li><a href="#">4</a></li>
    <li><a href="#">5</a></li>
    <li><a href="#">Next</a></li>
    </ul>
    </div>
     </div>
    <!-- End: MAIN CONTENT -->
    <!-- Start: FOOTER -->
    <footer>
      <div class="container">
        <div class="row">
          
          <div class="span2">
            <h4><i class="icon-beaker icon-white"></i> About</h4>
            <nav>
              <ul class="quick-links">
                
                <li><a href="news.html">News</a></li>
                <li><a href="events.html">Events</a></li>
                
              <ul>
            </nav>          
          </div>
          <div class="span2">
            <h4><i class="icon-thumbs-up icon-white"></i> Support</h4>
            <nav>
              <ul class="quick-links">
                   <li><a href="contact_us.html">Contact us</a></li> 
                 <li><a href="#">Privacy Policy</a></li>           
              </ul>
            </nav>
                      
          </div>
          <div class="span3">
            <h4>Get in touch</h4>
            <div class="social-icons-row">
              <a href="#"><i class="icon-twitter"></i></a>
              <a href="#"><i class="icon-facebook"></i></a>
                <a href="#"><i class="icon-google-plus"></i></a>                                          
            </div>
               </div>      
                 </div>
      </div>
      <hr class="footer-divider">
      <div class="container">
        <p>
          &copy; 2013-2014- Four Screen Film Festival, Inc. All Rights Reserved.
        </p>
      </div>
    </footer>
    <!-- End: FOOTER -->
   <script type="text/javascript" src="js/jquery.min.js"></script> 

   <script src="lib/jquery.raty.min.js"></script>
 
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/boot-business.js"></script>
  <script type="text/javascript" src="js/handlebars.js"></script>
  <script>
var source   = $("#viewFilms").html();
var template = Handlebars.compile(source);
var context = [
  {FilmId:1, score:3.5, numberOfVotes: 100,FilmName: "Avenger", url:"xemvuM-uav0", Cast:"Scarlet Johonsson, Iron man, captain America, Thor, tfwhavchgashcg", Director:"Cristain noles",Producer:"bbc films",Writer:"john david",Rating:"5"},{FilmId:2, score:5, numberOfVotes: 100,FilmName: "Avenger1", url:"xemvuM-uav0", Cast:"Scarlet Johonsson, Iron man, captain America, Thor, tfwhavchgashcg", Director:"Cristain noles",Producer:"bbc films",Writer:"john david",Rating:"5"},{FilmId:3, score:5,numberOfVotes: 100,FilmName: "Toy Story1", url:"ejwrxGs_Y_I", Cast:"Scarlet Johonsson, Iron man, captain America, Thor", Director:"Cristain noles",Producer:"bbc films",Writer:"john david",Rating:"5"},{FilmId:4, score:5,numberOfVotes: 100,FilmName: "Toy Story2", url:"ejwrxGs_Y_I", Cast:"Scarlet Johonsson, Iron man, captain America, Thor", Director:"Cristain noles",Producer:"bbc films",Writer:"john david",Rating:"5"},{FilmId:5, score:2,numberOfVotes: 100,FilmName: "Toy Story3", url:"ejwrxGs_Y_I", Cast:"Scarlet Johonsson, Iron man, captain America, Thor", Director:"Cristain noles",Producer:"bbc films",Writer:"john david",Rating:"5"},{FilmId:6, score:5,numberOfVotes: 100,FilmName: "Toy Story4", url:"ejwrxGs_Y_I", Cast:"Scarlet Johonsson, Iron man, captain America, Thor", Director:"Cristain noles",Producer:"bbc films",Writer:"john david",Rating:"5"},{FilmId:7, score:5,numberOfVotes: 100,FilmName: "Avenger2", url:"xemvuM-uav0", Cast:"Scarlet Johonsson, Iron man, captain America, Thor, tfwhavchgashcg", Director:"Cristain noles",Producer:"bbc films",Writer:"john david",Rating:"5"}
  ];

var html    = template(context);
$(".viewfilm").append(html);

var updateRating = function(rating){
    var data= {
    filmId:  this.id,
    rating: rating ,
  };
  $.ajax({
    url:"servlet",
    type:'GET',
    dataType:'json',
    data: data,
    success: function(){

    },
    error: function(){
       $('#'+data.filmId).raty({
        score:data.rating,
  readOnly : true,

});

    }
  });
}
    $.fn.raty.defaults.path = 'lib/img';
   for (var itr = 0; itr < context.length; itr++) {
    $('#element'+context[itr].FilmId).tooltip();
    $('#'+context[itr].FilmId).raty({
      score:context[itr].score,
      hints: ['Rotten', 'Poor', 'Indifferent', 'Good', 'Gorgeous'],
      half: true,
      click: updateRating,
    });
   };

  

$(document).on("click", ".open-viewer", function() {
  var vidId = $(this).data('id');
  var rateId = $(this).data('ratingId');
  $('iframe').attr("src", 'http://www.youtube.com/embed/' + vidId);
  $('.star').attr("id",'rateId');

});
      
</script>
  </body>
</html>